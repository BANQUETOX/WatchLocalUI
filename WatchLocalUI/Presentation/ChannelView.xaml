<Page x:Class="WatchLocalUI.Presentation.ChannelView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:WatchLocalUI.Presentation"
      xmlns:uen="using:Uno.Extensions.Navigation.UI"
      xmlns:utu="using:Uno.Toolkit.UI"
      xmlns:um="using:Uno.Material"
      xmlns:sio="using:System.IO"
      xmlns:wlc="using:WatchLocalUI.WatchLocalLogic.Classes"
      Background="{ThemeResource BackgroundBrush}">

    <Grid Background="Black" Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Header -->
            <RowDefinition Height="*" />
            <!-- Video Grid -->
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Grid Grid.Row="0" Margin="0 0 0 20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Back Button -->
            <Button Grid.Column="0" uen:Navigation.Request="-"
            Width="40" Height="40"
            Background="White"
            Margin="0,0,10,0">
                <FontIcon Glyph="&#xE72B;" Foreground="White" FontSize="24"/>
                <!-- Back icon -->
            </Button>

            <!-- Channel Icon -->
            <Ellipse Grid.Column="1" Width="60" Height="60">
                <Ellipse.Fill>
                    <ImageBrush ImageSource="{Binding ChannelPicturePath}"/>
                </Ellipse.Fill>
            </Ellipse>

            <!-- Channel Info -->
            <StackPanel Grid.Column="2" Margin="10 0" VerticalAlignment="Center">
                <TextBlock Text="{Binding ChannelName}" 
                           Foreground="White" 
                           FontSize="18" 
                           FontWeight="Bold"/>
                <TextBlock Foreground="White" FontSize="14">
                    <Run Text="Starting scan date:"/>
                    <Run Text="{Binding ChannelScannAfter}"/>
                </TextBlock>
            </StackPanel>

            <!-- Settings Button -->
            <Button Grid.Column="2" Width="40" Height="40" Background="Transparent">
                <FontIcon Glyph="&#xE713;" Foreground="White" FontSize="24"/>
                <!-- Settings Icon -->
            </Button>
        </Grid>
        <!-- Videos Grid -->
        <ScrollViewer Grid.Row="1">
            <ItemsRepeater Grid.Row="1" ItemsSource="{Binding VideoList}">
                <ItemsRepeater.Layout>
                    <UniformGridLayout
                    Orientation="Horizontal"
                    MaximumRowsOrColumns="12"
                    MinItemWidth="200"
                    MinItemHeight="160"/>
                </ItemsRepeater.Layout>

                <ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="wlc:VideoItem">
                        <StackPanel Margin="10" Width="200">
                            <Rectangle Width="200" Height="120" >
                                <Rectangle.Fill>
                                    <ImageBrush ImageSource="{x:Bind TumbNailPath }"/>
                                </Rectangle.Fill>
                            </Rectangle>
                            <TextBlock Text="{x:Bind Name}"
                                   Foreground="White"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Margin="0,3,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>

        </ScrollViewer>
    </Grid>
</Page>
