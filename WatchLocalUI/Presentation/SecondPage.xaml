<Page
    x:Class="WatchLocalUI.Presentation.SecondPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WatchLocalUI.Presentation"
    xmlns:watchLocalClass ="using:WatchLocalUI.WatchLocalLogic.Classes"
    xmlns:vm="using:WatchLocalUI.Presentation"
    xmlns:utu="using:Uno.Toolkit.UI"
    xmlns:um="using:Uno.Material"
    xmlns:rxui="using:Uno.Extensions.Reactive.UI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:uen="using:Uno.Extensions.Navigation.UI"
    mc:Ignorable="d"
    Background="{ThemeResource BackgroundBrush}"> 
   
   <Grid Padding="15">
            
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0">
             <TextBlock Text="Channel List" FontSize="20" Foreground="White" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Top UI Bar -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Top" Spacing="10" Margin="0,50,0,0">
            <TextBox Width="250"
                     Height="32"
                     PlaceholderText="Channel or video or playlist Link"
                     VerticalAlignment="Center"
                     Text="{Binding YoutubeLink,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                     />
            <!--Type of Download combobox-->
            <ComboBox Width="120"
                      Height="32"
                      VerticalAlignment="Center"
                      SelectedIndex="{Binding SelectedIndex,Mode=TwoWay}"
                      Visibility="{Binding DownloadTypeComboBoxVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <ComboBoxItem Content="Video"/>
                <ComboBoxItem Content="Audio"/>
            </ComboBox>
            <!-- Download or Add Button-->
            <Button Width="32" Height="32" Background="Green" Command="{Binding DownloadMedia}" Visibility="{Binding DownloadButtonVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <TextBlock Text="↓" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Button>

            <DatePicker Header="Set starting scann date" SelectedDate="{Binding SelectedDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding AddChannelButtonVisibility, Mode=TwoWay}" ></DatePicker>

            <Button Width="32" Height="32" Background="Blue" Command="{Binding AddChannel}" IsEnabled="{Binding IsChannelButtonEnable}"  Visibility="{Binding AddChannelButtonVisibility,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <TextBlock Text="Nice" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Button>


        </StackPanel>

        <ScrollViewer Margin="0,150,0,0" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Auto">
            <!--Create multiple channels-->
            <ItemsRepeater Grid.Row="1"  ItemsSource="{Binding Channels}">
                <ItemsRepeater.Layout>
                    <UniformGridLayout
                        Orientation="Vertical"
                        MaximumRowsOrColumns="3"
                        MinItemWidth="150"
                        MinItemHeight="150"/>
                </ItemsRepeater.Layout>
                <ItemsRepeater.ItemTemplate>
                    <DataTemplate x:DataType="watchLocalClass:ChannelTime" >
                        <Button Background="Transparent" BorderThickness="0" Padding="0 0 0 20 " uen:Navigation.Request="Channel" uen:Navigation.Data="{x:Bind}" >
                            <Canvas Width="100" Height="100" Grid.Column="0" Grid.Row="0">
                                <Ellipse Width="100" Height="100">
                                    <Ellipse.Fill>
                                        <ImageBrush ImageSource="{x:Bind picturePath}" />
                                    </Ellipse.Fill>
                                </Ellipse>
                                <Ellipse Width="24" Height="24" Fill="Red" Canvas.Left="76" Canvas.Top="0"/>
                                <TextBlock Text="5" Foreground="White" FontSize="14" FontWeight="Bold"
                                Canvas.Left="83" Canvas.Top="2"/>
                                <TextBlock Canvas.Top="100" Text="{x:Bind ChannelPropeties.Title}" Foreground="White"/>
                            </Canvas>
                        </Button>
                    </DataTemplate>
                </ItemsRepeater.ItemTemplate>
            </ItemsRepeater>

        </ScrollViewer>

    </Grid>
</Page>
